function linkify(e){var b,d,c,a;d=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;b=e.replace(d,'<a href="$1" target="_blank">$1</a>');c=/(^|[^\/])(www\.[\S]+(\b|$))/gim;b=b.replace(c,'$1<a href="http://$2" target="_blank">$2</a>');a=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim;b=b.replace(a,'<a href="mailto:$1">$1</a>');return b}function CreateViewable(f){var e=document.createElement("div");e.id="contentWithLinks";var b=document.getElementById("content");b.parentNode.insertBefore(e,b);document.getElementById("contentWithLinks").innerHTML=linkify(document.getElementById("printable").innerHTML).replace(/\r\n|\r|\n/g,"<br />");var d,c,a;d=document.getElementById("contentWithLinks");c="content wordwrap";a=d.className.split(" ");if(a.indexOf(c)==-1){d.className+=" "+c}if(f){d.style.border="none"}}function toggleView(b){var a=document.getElementById("content");b.innerHTML=(b.innerHTML=="view")?"edit":"view";if(a.style.display==="none"){a.style.display="block";var c=document.getElementById("contentWithLinks");c.parentNode.removeChild(c)}else{a.style.display="none";CreateViewable()}}function viewOnly(){var a=document.getElementById("content");a.style.display="none";CreateViewable(true)}document.onkeydown=function(a){a=a||window.event;if(a.keyCode==27){if(document.getElementById("password_modal").className=="modal_password show-modal"){toggleModal_Password();return}if(document.getElementById("content").style.display=="none"){toggleView(document.getElementById("a_view"))}}};