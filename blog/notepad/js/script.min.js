function uploadContent(f){f=f||false;if(content!==textarea.value||f){var b=textarea.value;var e=new XMLHttpRequest();var d=false;e.open("POST",window.location.href,true);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");e.onreadystatechange=function(){if(this.responseText.search("Invalid password")!==-1){location.reload()}if(typeof lastUpdated==="function"){lastUpdated(this.responseText)}};e.onload=function(){if(e.readyState===4){content=b;setTimeout(uploadContent,1500)}};e.onerror=function(){setTimeout(uploadContent,1000)};var c="text="+encodeURIComponent(b);if(typeof passwordRequest_Add==="function"){c=passwordRequest_Add(c)}if(typeof passwordRequest_Remove==="function"){c=passwordRequest_Remove(c)}e.send(c);printable.removeChild(printable.firstChild);printable.appendChild(document.createTextNode(b));if(document.getElementById("contentWithLinks")){document.getElementById("contentWithLinks").innerHTML=linkify(document.getElementById("printable").innerHTML).replace(/\r\n|\r|\n/g,"<br />");var a=document.getElementById("contentWithLinks").scrollHeight}}else{setTimeout(uploadContent,1000);if(typeof lastSaved==="function"){lastSaved()}}}var textarea=document.getElementById("content");var printable=document.getElementById("printable");var content=textarea.value;printable.appendChild(document.createTextNode(content));textarea.onkeydown=function(b){if(b.keyCode===9||b.which===9){b.preventDefault();var a=this.selectionStart;this.value=this.value.substring(0,this.selectionStart)+"\t"+this.value.substring(this.selectionEnd);this.selectionEnd=a+1}};textarea.focus();uploadContent();