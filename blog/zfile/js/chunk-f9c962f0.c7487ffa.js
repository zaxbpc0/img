(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9c962f0"],{1294:function(e,t,n){"use strict";var o=n("de88"),a=n.n(o);a.a},"34b5":function(e,t,n){"use strict";var o=n("3bb8"),a=n.n(o);a.a},"3bb8":function(e,t,n){},4127:function(e,t,n){"use strict";var o=n("d233"),a=n("b313"),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(e){return r.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,n,a,i,r,s,c,u,d,h,p,f){var m=t;if("function"===typeof c)m=c(n,m);else if(m instanceof Date)m=h(m);else if(null===m){if(i)return s&&!f?s(n,l.encoder):n;m=""}if("string"===typeof m||"number"===typeof m||"boolean"===typeof m||o.isBuffer(m)){if(s){var g=f?n:s(n,l.encoder);return[p(g)+"="+p(s(m,l.encoder))]}return[p(n)+"="+p(String(m))]}var v,y=[];if("undefined"===typeof m)return y;if(Array.isArray(c))v=c;else{var b=Object.keys(m);v=u?b.sort(u):b}for(var w=0;w<v.length;++w){var C=v[w];r&&null===m[C]||(y=Array.isArray(m)?y.concat(e(m[C],a(n,C),a,i,r,s,c,u,d,h,p,f)):y.concat(e(m[C],n+(d?"."+C:"["+C+"]"),a,i,r,s,c,u,d,h,p,f)))}return y};e.exports=function(e,t){var n=e,r=t?o.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!==typeof r.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof r.delimiter?l.delimiter:r.delimiter,u="boolean"===typeof r.strictNullHandling?r.strictNullHandling:l.strictNullHandling,d="boolean"===typeof r.skipNulls?r.skipNulls:l.skipNulls,h="boolean"===typeof r.encode?r.encode:l.encode,p="function"===typeof r.encoder?r.encoder:l.encoder,f="function"===typeof r.sort?r.sort:null,m="undefined"!==typeof r.allowDots&&r.allowDots,g="function"===typeof r.serializeDate?r.serializeDate:l.serializeDate,v="boolean"===typeof r.encodeValuesOnly?r.encodeValuesOnly:l.encodeValuesOnly;if("undefined"===typeof r.format)r.format=a["default"];else if(!Object.prototype.hasOwnProperty.call(a.formatters,r.format))throw new TypeError("Unknown format option provided.");var y,b,w=a.formatters[r.format];"function"===typeof r.filter?(b=r.filter,n=b("",n)):Array.isArray(r.filter)&&(b=r.filter,y=b);var C,S=[];if("object"!==typeof n||null===n)return"";C=r.arrayFormat in i?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var _=i[C];y||(y=Object.keys(n)),f&&y.sort(f);for(var I=0;I<y.length;++I){var D=y[I];d&&null===n[D]||(S=S.concat(s(n[D],D,_,u,d,h?p:null,b,f,m,g,w,v)))}var E=S.join(c),k=!0===r.addQueryPrefix?"?":"";return E.length>0?k+E:""}},4230:function(e,t,n){},4328:function(e,t,n){"use strict";var o=n("4127"),a=n("9e6a"),i=n("b313");e.exports={formats:i,parse:a,stringify:o}},4598:function(e,t,n){"use strict";var o=n("4230"),a=n.n(o);a.a},"8d1d":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addDrive}},[e._v("新增")]),n("span",{staticClass:"zfile-word-aux"},[e._v("提示：拖拽行可以进行排序")])],1),n("el-table",{ref:"driveTable",attrs:{data:e.driveList,"row-key":"id","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",width:"100",label:"驱动器ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.id))]),n("i",{staticClass:"el-icon-edit-outline table-edit-icon",on:{click:function(n){return e.editDriveId(t.row.id)}}})]}}])}),n("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"驱动器名称"}}),n("el-table-column",{attrs:{prop:"type",formatter:e.typeFormatter,"show-overflow-tooltip":!0,width:"160",label:"所属策略"}}),n("el-table-column",{attrs:{prop:"enable",width:"100",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchEnableStatus(t.row)}},model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}})]}}])}),n("el-table-column",{attrs:{prop:"enableCache",width:"100",label:"缓存开启"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchCacheEnableStatus(t.row)}},model:{value:t.row.enableCache,callback:function(n){e.$set(t.row,"enableCache",n)},expression:"scope.row.enableCache"}})]}}])}),n("el-table-column",{attrs:{prop:"autoRefreshCache",width:"120",label:"缓存自动刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchAutoRefreshStatus(t.row)}},model:{value:t.row.autoRefreshCache,callback:function(n){e.$set(t.row,"autoRefreshCache",n)},expression:"scope.row.autoRefreshCache"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"left"}},[n("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.editDrive(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缓存管理",placement:"top"}},[n("el-button",{staticClass:"el-icon-s-operation",attrs:{size:"mini",disabled:!t.row.enableCache,type:"primary"},on:{click:function(n){return e.cacheManage(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文件过滤",placement:"bottom"}},[n("el-button",{staticClass:"el-icon-view",attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.showFilterDialog(t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"right"}},[n("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteDrive(t.row)}}})],1)]]}}])})],1),n("el-dialog",{attrs:{width:"80%",title:"驱动器设置","modal-append-to-body":!1,visible:e.driveEditDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.driveEditDialogVisible=t}}},[n("drive-edit",{attrs:{"drive-item":e.driveItem,close:e.closeDriveEdit,"support-strategy":e.supportStrategy}})],1),n("el-dialog",{attrs:{width:"40%",title:"过滤规则","modal-append-to-body":!1,visible:e.filterDialogVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.filterDialogVisible=t}}},[n("filter-pattern",{attrs:{"drive-id":e.currentCacheManageId,close:e.closeFilterDialog}})],1),n("el-dialog",{attrs:{id:"cacheDialog",width:"70%",title:"缓存管理","modal-append-to-body":!1,visible:e.cacheManageVisible,top:"10vh","destroy-on-close":!0},on:{"update:visible":function(t){e.cacheManageVisible=t},close:e.closeCacheManage}},[n("cache-manager",{attrs:{"current-cache-manage-id":this.currentCacheManageId}})],1)],1)},a=[];
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function c(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}function u(e,t){if(null==e)return{};var n,o,a=c(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d="1.10.2";function h(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var p=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),f=h(/Edge/i),m=h(/firefox/i),g=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),v=h(/iP(ad|od|hone)/i),y=h(/chrome/i)&&h(/android/i),b={capture:!1,passive:!1};function w(e,t,n){e.addEventListener(t,n,!p&&b)}function C(e,t,n){e.removeEventListener(t,n,!p&&b)}function S(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function _(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function I(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&S(e,t):S(e,t))||o&&e===n)return e;if(e===n)break}while(e=_(e))}return null}var D,E=/\s+/g;function k(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(E," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(E," ")}}function x(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"===typeof n?"":"px")}}function T(e,t){var n="";if("string"===typeof e)n=e;else do{var o=x(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function O(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function P(){var e=document.scrollingElement;return e||document.documentElement}function N(e,t,n,o,a){if(e.getBoundingClientRect||e===window){var i,r,l,s,c,u,d;if(e!==window&&e!==P()?(i=e.getBoundingClientRect(),r=i.top,l=i.left,s=i.bottom,c=i.right,u=i.height,d=i.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!p))do{if(a&&a.getBoundingClientRect&&("none"!==x(a,"transform")||n&&"static"!==x(a,"position"))){var h=a.getBoundingClientRect();r-=h.top+parseInt(x(a,"border-top-width")),l-=h.left+parseInt(x(a,"border-left-width")),s=r+i.height,c=l+i.width;break}}while(a=a.parentNode);if(o&&e!==window){var f=T(a||e),m=f&&f.a,g=f&&f.d;f&&(r/=g,l/=m,d/=m,u/=g,s=r+u,c=l+d)}return{top:r,left:l,bottom:s,right:c,width:d,height:u}}}function M(e,t,n){var o=R(e,!0),a=N(e)[t];while(o){var i=N(o)[n],r=void 0;if(r="top"===n||"left"===n?a>=i:a<=i,!r)return o;if(o===P())break;o=R(o,!1)}return!1}function A(e,t,n){var o=0,a=0,i=e.children;while(a<i.length){if("none"!==i[a].style.display&&i[a]!==Ke.ghost&&i[a]!==Ke.dragged&&I(i[a],n.draggable,e,!1)){if(o===t)return i[a];o++}a++}return null}function F(e,t){var n=e.lastElementChild;while(n&&(n===Ke.ghost||"none"===x(n,"display")||t&&!S(n,t)))n=n.previousElementSibling;return n||null}function j(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ke.clone||t&&!S(e,t)||n++;return n}function $(e){var t=0,n=0,o=P();if(e)do{var a=T(e),i=a.a,r=a.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function z(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}function R(e,t){if(!e||!e.getBoundingClientRect)return P();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=x(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(o||t)return n;o=!0}}}while(n=n.parentNode);return P()}function q(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function L(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function X(e,t){return function(){if(!D){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),D=setTimeout((function(){D=void 0}),t)}}}function Y(){clearTimeout(D),D=void 0}function B(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function H(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var V="Sortable"+(new Date).getTime();function W(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==x(e,"display")&&e!==Ke.ghost){t.push({target:e,rect:N(e)});var n=s({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=T(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(z(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var a=!1,i=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,l=N(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=T(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&L(s,l)&&!L(r,l)&&(u.top-l.top)/(u.left-l.left)===(r.top-l.top)/(r.left-l.left)&&(t=U(u,s,c,o.options)),L(l,r)||(n.prevFromRect=r,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,u,l,t)),t&&(a=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"===typeof n&&n()}),i):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){x(e,"transition",""),x(e,"transform","");var a=T(this.el),i=a&&a.a,r=a&&a.d,l=(t.left-n.left)/(i||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,x(e,"transform","translate3d("+l+"px,"+s+"px,0)"),K(e),x(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),x(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){x(e,"transition",""),x(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}function K(e){return e.offsetWidth}function U(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var G=[],Q={initializeByDefault:!0},J={mount:function(e){for(var t in Q)!Q.hasOwnProperty(t)||t in e||(e[t]=Q[t]);G.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var a=e+"Global";G.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][a]&&t[o.pluginName][a](s({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](s({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var a in G.forEach((function(o){var a=o.pluginName;if(e.options[a]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[a]=i,l(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);"undefined"!==typeof i&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return G.forEach((function(o){"function"===typeof o.eventProperties&&l(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return G.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"===typeof a.optionListeners[t]&&(o=a.optionListeners[t].call(e[a.pluginName],n))})),o}};function Z(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,i=e.cloneEl,r=e.toEl,l=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,h=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[V],t){var y,b=t.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||p||f?(y=document.createEvent("Event"),y.initEvent(o,!0,!0)):y=new CustomEvent(o,{bubbles:!0,cancelable:!0}),y.to=r||n,y.from=l||n,y.item=a||n,y.clone=i,y.oldIndex=c,y.newIndex=u,y.oldDraggableIndex=d,y.newDraggableIndex=h,y.originalEvent=m,y.pullMode=g?g.lastPutMode:void 0;var C=s({},v,J.getEventProperties(o,t));for(var S in C)y[S]=C[S];n&&n.dispatchEvent(y),b[w]&&b[w].call(t,y)}}var ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,a=u(n,["evt"]);J.pluginEvent.bind(Ke)(e,t,s({dragEl:ne,parentEl:oe,ghostEl:ae,rootEl:ie,nextEl:re,lastDownEl:le,cloneEl:se,cloneHidden:ce,dragStarted:Se,putSortable:me,activeSortable:Ke.active,originalEvent:o,oldIndex:ue,oldDraggableIndex:he,newIndex:de,newDraggableIndex:pe,hideGhostForTarget:Be,unhideGhostForTarget:He,cloneNowHidden:function(){ce=!0},cloneNowShown:function(){ce=!1},dispatchSortableEvent:function(e){te({sortable:t,name:e,originalEvent:o})}},a))};function te(e){Z(s({putSortable:me,cloneEl:se,targetEl:ne,rootEl:ie,oldIndex:ue,oldDraggableIndex:he,newIndex:de,newDraggableIndex:pe},e))}var ne,oe,ae,ie,re,le,se,ce,ue,de,he,pe,fe,me,ge,ve,ye,be,we,Ce,Se,_e,Ie,De,Ee,ke=!1,xe=!1,Te=[],Oe=!1,Pe=!1,Ne=[],Me=!1,Ae=[],Fe="undefined"!==typeof document,je=v,$e=f||p?"cssFloat":"float",ze=Fe&&!y&&!v&&"draggable"in document.createElement("div"),Re=function(){if(Fe){if(p)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),qe=function(e,t){var n=x(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=A(e,0,t),i=A(e,1,t),r=a&&x(a),l=i&&x(i),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+N(a).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+N(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r["float"]&&"none"!==r["float"]){var u="left"===r["float"]?"left":"right";return!i||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[$e]||i&&"none"===n[$e]&&s+c>o)?"vertical":"horizontal"},Le=function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||a===l||o+i/2===r+s/2},Xe=function(e,t){var n;return Te.some((function(o){if(!F(o)){var a=N(o),i=o[V].options.emptyInsertThreshold,r=e>=a.left-i&&e<=a.right+i,l=t>=a.top-i&&t<=a.bottom+i;return i&&r&&l?n=o:void 0}})),n},Ye=function(e){function t(e,n){return function(o,a,i,r){var l=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(o,a,i,r),n)(o,a,i,r);var s=(n?o:a).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==i(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Be=function(){!Re&&ae&&x(ae,"display","none")},He=function(){!Re&&ae&&x(ae,"display","")};Fe&&document.addEventListener("click",(function(e){if(xe)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),xe=!1,!1}),!0);var Ve=function(e){if(ne){e=e.touches?e.touches[0]:e;var t=Xe(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[V]._onDragOver(n)}}},We=function(e){ne&&ne.parentNode[V]._isOutsideThisEl(e.target)};function Ke(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=l({},t),e[V]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ke.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var o in J.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var a in Ye(t),this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&ze,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?w(e,"pointerdown",this._onTapStart):(w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Te.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),l(this,W())}function Ue(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ge(e,t,n,o,a,i,r,l){var s,c,u=e[V],d=u.options.onMove;return!window.CustomEvent||p||f?(s=document.createEvent("Event"),s.initEvent("move",!0,!0)):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=a||t,s.relatedRect=i||N(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),d&&(c=d.call(u,s,r)),c}function Qe(e){e.draggable=!1}function Je(){Me=!1}function Ze(e,t,n){var o=N(F(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}function et(e,t,n,o,a,i,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!r)if(l&&De<c*a){if(!Oe&&(1===Ie?s>u+c*i/2:s<d-c*i/2)&&(Oe=!0),Oe)h=!0;else if(1===Ie?s<u+De:s>d-De)return-Ie}else if(s>u+c*(1-a)/2&&s<d-c*(1-a)/2)return tt(t);return h=h||r,h&&(s<u+c*i/2||s>d-c*i/2)?s>u+c/2?1:-1:0}function tt(e){return j(ne)<j(e)?1:-1}function nt(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;while(n--)o+=t.charCodeAt(n);return o.toString(36)}function ot(e){Ae.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var o=t[n];o.checked&&Ae.push(o)}}function at(e){return setTimeout(e,0)}function it(e){return clearTimeout(e)}Ke.prototype={constructor:Ke,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(_e=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,ne):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(ot(n),!ne&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(l=I(l,o.draggable,n,!1),(!l||!l.animated)&&le!==l)){if(ue=j(l),he=j(l,o.draggable),"function"===typeof c){if(c.call(this,e,l,this))return te({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),ee("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=I(s,o.trim(),n,!1),o)return te({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),ee("filter",t,{evt:e}),!0})),c))return void(a&&e.cancelable&&e.preventDefault());o.handle&&!I(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,a=this,i=a.el,r=a.options,l=i.ownerDocument;if(n&&!ne&&n.parentNode===i){var s=N(n);if(ie=i,ne=n,oe=ne.parentNode,re=ne.nextSibling,le=n,fe=r.group,Ke.dragged=ne,ge={target:ne,clientX:(t||e).clientX,clientY:(t||e).clientY},we=ge.clientX-s.left,Ce=ge.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ne.style["will-change"]="all",o=function(){ee("delayEnded",a,{evt:e}),Ke.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!m&&a.nativeDraggable&&(ne.draggable=!0),a._triggerDragStart(e,t),te({sortable:a,name:"choose",originalEvent:e}),k(ne,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){O(ne,e.trim(),Qe)})),w(l,"dragover",Ve),w(l,"mousemove",Ve),w(l,"touchmove",Ve),w(l,"mouseup",a._onDrop),w(l,"touchend",a._onDrop),w(l,"touchcancel",a._onDrop),m&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ne.draggable=!0),ee("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(f||p))o();else{if(Ke.eventCanceled)return void this._onDrop();w(l,"mouseup",a._disableDelayedDrag),w(l,"touchend",a._disableDelayedDrag),w(l,"touchcancel",a._disableDelayedDrag),w(l,"mousemove",a._delayedDragTouchMoveHandler),w(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&w(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ne&&Qe(ne),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._disableDelayedDrag),C(e,"touchend",this._disableDelayedDrag),C(e,"touchcancel",this._disableDelayedDrag),C(e,"mousemove",this._delayedDragTouchMoveHandler),C(e,"touchmove",this._delayedDragTouchMoveHandler),C(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):w(document,t?"touchmove":"mousemove",this._onTouchMove):(w(ne,"dragend",this),w(ie,"dragstart",this._onDragStart));try{document.selection?at((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(ke=!1,ie&&ne){ee("dragStarted",this,{evt:t}),this.nativeDraggable&&w(document,"dragover",We);var n=this.options;!e&&k(ne,n.dragClass,!1),k(ne,n.ghostClass,!0),Ke.active=this,e&&this._appendGhost(),te({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,Be();var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e===t)break;t=e}if(ne.parentNode[V]._isOutsideThisEl(e),t)do{if(t[V]){var n=void 0;if(n=t[V]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);He()}},_onTouchMove:function(e){if(ge){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=ae&&T(ae,!0),r=ae&&i&&i.a,l=ae&&i&&i.d,s=je&&Ee&&$(Ee),c=(a.clientX-ge.clientX+o.x)/(r||1)+(s?s[0]-Ne[0]:0)/(r||1),u=(a.clientY-ge.clientY+o.y)/(l||1)+(s?s[1]-Ne[1]:0)/(l||1);if(!Ke.active&&!ke){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ae){i?(i.e+=c-(ye||0),i.f+=u-(be||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");x(ae,"webkitTransform",d),x(ae,"mozTransform",d),x(ae,"msTransform",d),x(ae,"transform",d),ye=c,be=u,ve=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ae){var e=this.options.fallbackOnBody?document.body:ie,t=N(ne,!0,je,!0,e),n=this.options;if(je){Ee=e;while("static"===x(Ee,"position")&&"none"===x(Ee,"transform")&&Ee!==document)Ee=Ee.parentNode;Ee!==document.body&&Ee!==document.documentElement?(Ee===document&&(Ee=P()),t.top+=Ee.scrollTop,t.left+=Ee.scrollLeft):Ee=P(),Ne=$(Ee)}ae=ne.cloneNode(!0),k(ae,n.ghostClass,!1),k(ae,n.fallbackClass,!0),k(ae,n.dragClass,!0),x(ae,"transition",""),x(ae,"transform",""),x(ae,"box-sizing","border-box"),x(ae,"margin",0),x(ae,"top",t.top),x(ae,"left",t.left),x(ae,"width",t.width),x(ae,"height",t.height),x(ae,"opacity","0.8"),x(ae,"position",je?"absolute":"fixed"),x(ae,"zIndex","100000"),x(ae,"pointerEvents","none"),Ke.ghost=ae,e.appendChild(ae),x(ae,"transform-origin",we/parseInt(ae.style.width)*100+"% "+Ce/parseInt(ae.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;ee("dragStart",this,{evt:e}),Ke.eventCanceled?this._onDrop():(ee("setupClone",this),Ke.eventCanceled||(se=H(ne),se.draggable=!1,se.style["will-change"]="",this._hideClone(),k(se,this.options.chosenClass,!1),Ke.clone=se),n.cloneId=at((function(){ee("clone",n),Ke.eventCanceled||(n.options.removeCloneOnHide||ie.insertBefore(se,ne),n._hideClone(),te({sortable:n,name:"clone"}))})),!t&&k(ne,a.dragClass,!0),t?(xe=!0,n._loopId=setInterval(n._emulateDragOver,50)):(C(document,"mouseup",n._onDrop),C(document,"touchend",n._onDrop),C(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,ne)),w(document,"drop",n),x(ne,"transform","translateZ(0)")),ke=!0,n._dragStartId=at(n._dragStarted.bind(n,t,e)),w(document,"selectstart",n),Se=!0,g&&x(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,a,i=this.el,r=e.target,l=this.options,c=l.group,u=Ke.active,d=fe===c,h=l.sort,p=me||u,f=this,m=!1;if(!Me){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=I(r,l.draggable,i,!0),A("dragOver"),Ke.eventCanceled)return m;if(ne.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return z(!1);if(xe=!1,u&&!l.disabled&&(d?h||(o=!ie.contains(ne)):me===this||(this.lastPutMode=fe.checkPull(this,u,ne,e))&&c.checkPut(this,u,ne,e))){if(a="vertical"===this._getDirection(e,r),t=N(ne),A("dragOverValid"),Ke.eventCanceled)return m;if(o)return oe=ie,$(),this._hideClone(),A("revert"),Ke.eventCanceled||(re?ie.insertBefore(ne,re):ie.appendChild(ne)),z(!0);var g=F(i,l.draggable);if(!g||Ze(e,a,this)&&!g.animated){if(g===ne)return z(!1);if(g&&i===e.target&&(r=g),r&&(n=N(r)),!1!==Ge(ie,i,ne,t,r,n,e,!!r))return $(),i.appendChild(ne),oe=i,R(),z(!0)}else if(r.parentNode===i){n=N(r);var v,y,b=0,w=ne.parentNode!==i,C=!Le(ne.animated&&ne.toRect||t,r.animated&&r.toRect||n,a),S=a?"top":"left",_=M(r,"top","top")||M(ne,"top","top"),D=_?_.scrollTop:void 0;if(_e!==r&&(v=n[S],Oe=!1,Pe=!C&&l.invertSwap||w),b=et(e,r,n,a,C?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Pe,_e===r),0!==b){var E=j(ne);do{E-=b,y=oe.children[E]}while(y&&("none"===x(y,"display")||y===ae))}if(0===b||y===r)return z(!1);_e=r,Ie=b;var T=r.nextElementSibling,O=!1;O=1===b;var P=Ge(ie,i,ne,t,r,n,e,O);if(!1!==P)return 1!==P&&-1!==P||(O=1===P),Me=!0,setTimeout(Je,30),$(),O&&!T?i.appendChild(ne):r.parentNode.insertBefore(ne,O?T:r),_&&B(_,0,D-_.scrollTop),oe=ne.parentNode,void 0===v||Pe||(De=Math.abs(v-N(r)[S])),R(),z(!0)}if(i.contains(ne))return z(!1)}return!1}function A(l,c){ee(l,f,s({evt:e,isOwner:d,axis:a?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:r,completed:z,onMove:function(n,o){return Ge(ie,i,ne,t,n,N(n),e,o)},changed:R},c))}function $(){A("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function z(t){return A("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(k(ne,me?me.options.ghostClass:u.options.ghostClass,!1),k(ne,l.ghostClass,!0)),me!==f&&f!==Ke.active?me=f:f===Ke.active&&me&&(me=null),p===f&&(f._ignoreWhileAnimating=r),f.animateAll((function(){A("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===ne&&!ne.animated||r===i&&!r.animated)&&(_e=null),l.dragoverBubble||e.rootEl||r===document||(ne.parentNode[V]._isOutsideThisEl(e.target),!t&&Ve(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function R(){de=j(ne),pe=j(ne,l.draggable),te({sortable:f,name:"change",toEl:i,newIndex:de,newDraggableIndex:pe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){C(document,"mousemove",this._onTouchMove),C(document,"touchmove",this._onTouchMove),C(document,"pointermove",this._onTouchMove),C(document,"dragover",Ve),C(document,"mousemove",Ve),C(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._onDrop),C(e,"touchend",this._onDrop),C(e,"pointerup",this._onDrop),C(e,"touchcancel",this._onDrop),C(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;de=j(ne),pe=j(ne,n.draggable),ee("drop",this,{evt:e}),oe=ne&&ne.parentNode,de=j(ne),pe=j(ne,n.draggable),Ke.eventCanceled?this._nulling():(ke=!1,Pe=!1,Oe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),it(this.cloneId),it(this._dragStartId),this.nativeDraggable&&(C(document,"drop",this),C(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),g&&x(document.body,"user-select",""),x(ne,"transform",""),e&&(Se&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ae&&ae.parentNode&&ae.parentNode.removeChild(ae),(ie===oe||me&&"clone"!==me.lastPutMode)&&se&&se.parentNode&&se.parentNode.removeChild(se),ne&&(this.nativeDraggable&&C(ne,"dragend",this),Qe(ne),ne.style["will-change"]="",Se&&!ke&&k(ne,me?me.options.ghostClass:this.options.ghostClass,!1),k(ne,this.options.chosenClass,!1),te({sortable:this,name:"unchoose",toEl:oe,newIndex:null,newDraggableIndex:null,originalEvent:e}),ie!==oe?(de>=0&&(te({rootEl:oe,name:"add",toEl:oe,fromEl:ie,originalEvent:e}),te({sortable:this,name:"remove",toEl:oe,originalEvent:e}),te({rootEl:oe,name:"sort",toEl:oe,fromEl:ie,originalEvent:e}),te({sortable:this,name:"sort",toEl:oe,originalEvent:e})),me&&me.save()):de!==ue&&de>=0&&(te({sortable:this,name:"update",toEl:oe,originalEvent:e}),te({sortable:this,name:"sort",toEl:oe,originalEvent:e})),Ke.active&&(null!=de&&-1!==de||(de=ue,pe=he),te({sortable:this,name:"end",toEl:oe,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){ee("nulling",this),ie=ne=oe=ae=re=se=le=ce=ge=ve=Se=de=pe=ue=he=_e=Ie=me=fe=Ke.dragged=Ke.ghost=Ke.clone=Ke.active=null,Ae.forEach((function(e){e.checked=!0})),Ae.length=ye=be=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ne&&(this._onDragOver(e),Ue(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,i=this.options;o<a;o++)e=n[o],I(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||nt(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,o){var a=n.children[o];I(a,this.options.draggable,n,!1)&&(t[e]=a)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return I(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=J.modifyOption(this,e,t);n[e]="undefined"!==typeof o?o:t,"group"===e&&Ye(n)},destroy:function(){ee("destroy",this);var e=this.el;e[V]=null,C(e,"mousedown",this._onTapStart),C(e,"touchstart",this._onTapStart),C(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(C(e,"dragover",this),C(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Te.splice(Te.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ce){if(ee("hideClone",this),Ke.eventCanceled)return;x(se,"display","none"),this.options.removeCloneOnHide&&se.parentNode&&se.parentNode.removeChild(se),ce=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ce){if(ee("showClone",this),Ke.eventCanceled)return;ie.contains(ne)&&!this.options.group.revertClone?ie.insertBefore(se,ne):re?ie.insertBefore(se,re):ie.appendChild(se),this.options.group.revertClone&&this.animate(ne,se),x(se,"display",""),ce=!1}}else this._hideClone()}},Fe&&w(document,"touchmove",(function(e){(Ke.active||ke)&&e.cancelable&&e.preventDefault()})),Ke.utils={on:w,off:C,css:x,find:O,is:function(e,t){return!!I(e,t,e,!1)},extend:q,throttle:X,closest:I,toggleClass:k,clone:H,index:j,nextTick:at,cancelNextTick:it,detectDirection:qe,getChild:A},Ke.get=function(e){return e[V]},Ke.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ke.utils=s({},Ke.utils,e.utils)),J.mount(e)}))},Ke.create=function(e,t){return new Ke(e,t)},Ke.version=d;var rt,lt,st,ct,ut,dt,ht=[],pt=!1;function ft(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):t.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):(C(document,"pointermove",this._handleFallbackAutoScroll),C(document,"touchmove",this._handleFallbackAutoScroll),C(document,"mousemove",this._handleFallbackAutoScroll)),gt(),mt(),Y()},nulling:function(){ut=lt=rt=pt=dt=st=ct=null,ht.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,a);if(ut=e,t||f||p||g){vt(e,this.options,i,t);var r=R(i,!0);!pt||dt&&o===st&&a===ct||(dt&&gt(),dt=setInterval((function(){var i=R(document.elementFromPoint(o,a),!0);i!==r&&(r=i,mt()),vt(e,n.options,i,t)}),10),st=o,ct=a)}else{if(!this.options.bubbleScroll||R(i,!0)===P())return void mt();vt(e,this.options,R(i,!1),!1)}}},l(e,{pluginName:"scroll",initializeByDefault:!0})}function mt(){ht.forEach((function(e){clearInterval(e.pid)})),ht=[]}function gt(){clearInterval(dt)}var vt=X((function(e,t,n,o){if(t.scroll){var a,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=P(),u=!1;lt!==n&&(lt=n,mt(),rt=t.scroll,a=t.scrollFn,!0===rt&&(rt=R(n,!0)));var d=0,h=rt;do{var p=h,f=N(p),m=f.top,g=f.bottom,v=f.left,y=f.right,b=f.width,w=f.height,C=void 0,S=void 0,_=p.scrollWidth,I=p.scrollHeight,D=x(p),E=p.scrollLeft,k=p.scrollTop;p===c?(C=b<_&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),S=w<I&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(C=b<_&&("auto"===D.overflowX||"scroll"===D.overflowX),S=w<I&&("auto"===D.overflowY||"scroll"===D.overflowY));var T=C&&(Math.abs(y-i)<=l&&E+b<_)-(Math.abs(v-i)<=l&&!!E),O=S&&(Math.abs(g-r)<=l&&k+w<I)-(Math.abs(m-r)<=l&&!!k);if(!ht[d])for(var M=0;M<=d;M++)ht[M]||(ht[M]={});ht[d].vx==T&&ht[d].vy==O&&ht[d].el===p||(ht[d].el=p,ht[d].vx=T,ht[d].vy=O,clearInterval(ht[d].pid),0==T&&0==O||(u=!0,ht[d].pid=setInterval(function(){o&&0===this.layer&&Ke.active._onTouchMove(ut);var t=ht[this.layer].vy?ht[this.layer].vy*s:0,n=ht[this.layer].vx?ht[this.layer].vx*s:0;"function"===typeof a&&"continue"!==a.call(Ke.dragged.parentNode[V],n,t,e,ut,ht[this.layer].el)||B(ht[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=R(h,!1)));pt=u}}),30),yt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||a;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function bt(){}function wt(){}bt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=A(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:yt},l(bt,{pluginName:"revertOnSpill"}),wt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:yt},l(wt,{pluginName:"removeOnSpill"});Ke.mount(new ft),Ke.mount(wt,bt);var Ct=Ke,St=n("4328"),_t=n.n(St),It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.supportStrategy?n("div",[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"element-loading-text":"保存并初始化中.",id:"siteForm",model:e.driveItem,rules:e.rules,"label-width":"auto","status-icon":!0}},[n("el-row",{attrs:{gutter:50}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"驱动器名称",prop:"name"}},[n("el-input",{model:{value:e.driveItem.name,callback:function(t){e.$set(e.driveItem,"name",t)},expression:"driveItem.name"}})],1),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{model:{value:e.driveItem.enable,callback:function(t){e.$set(e.driveItem,"enable",t)},expression:"driveItem.enable"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            如不启用，则不在首页展示。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存"}},[n("el-switch",{on:{change:e.cacheChange},model:{value:e.driveItem.enableCache,callback:function(t){e.$set(e.driveItem,"enableCache",t)},expression:"driveItem.enableCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            开启缓存后，N 秒内重复请求相同文件夹，不会重复调用 API。\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.timeout}，默认为 1800 秒。\n                            "),n("br"),n("br"),e._v("\n                            注意：开启缓存后，可能会导致系统不稳定，如非必要或不了解缓存的，不建议开启此功能。\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"开启缓存自动刷新"}},[n("el-switch",{model:{value:e.driveItem.autoRefreshCache,callback:function(t){e.$set(e.driveItem,"autoRefreshCache",t)},expression:"driveItem.autoRefreshCache"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                            每隔 N 秒检测到期的缓存, 对于过期缓存尝试调用 API, 重新写入缓存.\n                            "),n("br"),e._v("\n                            参数 N 在配置文件中设置 {zfile.cache.auto-refresh-interval}，默认为 5 秒。\n                            "),n("br"),n("br"),e._v("\n                            注意：如您的数据，并非\n                        ")]),n("i",{staticClass:"el-icon-info zfile-info-tooltip"})])],1),n("el-form-item",{attrs:{label:"存储策略",prop:"type"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择存储策略"},model:{value:e.driveItem.type,callback:function(t){e.$set(e.driveItem,"type",t)},expression:"driveItem.type"}},e._l(e.supportStrategy,(function(e){return n("el-option",{key:e.key,attrs:{label:e.description,value:e.key}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[e._l(e.storageStrategyForm,(function(t){return"siteType"!==t.key?n("el-form-item",{key:t.title,attrs:{label:t.title,prop:"storageStrategyConfig."+t.key}},[n("el-col",{staticClass:"el-drive-form-col",attrs:{span:22}},["endPoint"===t.key&&e.region.hasOwnProperty(e.driveItem.type)?n("el-select",{model:{value:e.driveItem.storageStrategyConfig.endPoint,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"endPoint",t)},expression:"driveItem.storageStrategyConfig.endPoint"}},e._l(e.region[e.driveItem.type],(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.val}})})),1):"pathStyle"===t.key?n("div",[n("el-select",{model:{value:e.driveItem.storageStrategyConfig.pathStyle,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"pathStyle",t)},expression:"driveItem.storageStrategyConfig.pathStyle"}},[n("el-option",{attrs:{label:"bucket-virtual-hosting",value:"bucket-virtual-hosting"}}),n("el-option",{attrs:{label:"path-style",value:"path-style"}})],1),n("el-link",{staticClass:"zfile-word-aux",attrs:{target:"_blank",icon:"el-icon-document",href:"https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/dev/VirtualHosting.html#path-style-access"}},[e._v("查看 S3 API 说明文档")])],1):"isPrivate"===t.key?n("div",[n("el-switch",{model:{value:e.driveItem.storageStrategyConfig.isPrivate,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"isPrivate",t)},expression:"driveItem.storageStrategyConfig.isPrivate"}}),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    私有空间会生成带签名的下载链接\n                                ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?n("el-input",{attrs:{placeholder:""},on:{input:function(t){return e.change(t)}},model:{value:e.driveItem.storageStrategyConfig[t.key],callback:function(n){e.$set(e.driveItem.storageStrategyConfig,t.key,n)},expression:"driveItem.storageStrategyConfig[item.key]"}}):n("div",[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入站点名称"},model:{value:e.driveItem.storageStrategyConfig.siteName,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteName",t)},expression:"driveItem.storageStrategyConfig.siteName"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},on:{input:function(t){return e.change(t)}},slot:"prepend",model:{value:e.driveItem.storageStrategyConfig.siteType,callback:function(t){e.$set(e.driveItem.storageStrategyConfig,"siteType",t)},expression:"driveItem.storageStrategyConfig.siteType"}},[n("el-option",{attrs:{label:"/sites/",value:"/sites/"}}),n("el-option",{attrs:{label:"/teams/",value:"/teams/"}})],1)],1)],1)],1),"basePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                基路径表示从哪个路径开始文件, 不填写表示从根开始\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"filePath"===t.key?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                Linux 或对象存储等需以 / 开头.\n                                "),n("br"),e._v("\n                                Windows 支持 C:/ 类的盘符开头.\n                                "),n("br"),e._v("\n                                结尾不需要加 "),n("b",[e._v("/")]),e._v(".\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"domain"===t.key&&"ftp"===e.driveItem.type?n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                此域名表示 http 访问域名，如有端口，也需要写明。\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1):e._e(),"siteName"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                /sites/xxx 或 /teams/xxx ，xxx 为你的站点名称\n                            ")]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1),"siteId"!==t.key||"sharepoint"!==e.driveItem.type&&"sharepoint-china"!==e.driveItem.type?e._e():n("div",[n("el-tooltip",{attrs:{placement:"bottom"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v('\n                                输入 "访问令牌" 和 "站点名称" 后，可以自动获取 SiteId。\n                                '),n("br"),e._v('\n                                如无法自动获取，请点击下方的 "前往获取 Site Id"。\n                            ')]),n("i",{staticClass:"el-icon-question zfile-info-tooltip"})])],1)],1):e._e()})),"onedrive"===e.driveItem.type||"sharepoint"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint"===e.driveItem.type,expression:"driveItem.type === 'sharepoint'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"onedrive-china"===e.driveItem.type||"sharepoint-china"===e.driveItem.type?n("el-form-item",[n("el-link",{attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/onedrive/china-authorize"}},[e._v("前往获取令牌")]),n("br"),n("el-link",{directives:[{name:"show",rawName:"v-show",value:"sharepoint-china"===e.driveItem.type,expression:"driveItem.type === 'sharepoint-china'"}],attrs:{target:"_blank",icon:"el-icon-link",href:e.$http.defaults.baseURL+"/#/sharepoint-util"}},[e._v("前往获取 Site Id")])],1):e._e(),"ftp"===e.driveItem.type?n("el-form-item",[n("div",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                        注意: FTP 协议，如果不填写加速域名 (HTTP 下载地址)，则会使用 FTP 协议进行下载\n                        "),n("br"),e._v("\n                        FTP 协议会在 URL 中暴露用户名密码，如："),n("b",[e._v("ftp://用户名:密码@IP:端口/文件路径/文件名")]),n("br"),e._v("\n                        如为 FTP 提供了加速域名 (HTTP 下载地址)，则会使用 HTTP 协议，如："),n("b",[e._v("http(s)://加速域名/文件路径/文件名")])])]):e._e()],2)],1)],1),n("div",{staticClass:"zfile-text-align-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),n("el-button",{on:{click:e.close}},[e._v("取 消")])],1)],1):e._e()},Dt=[],Et={aliyun:[{name:"华东 1（杭州）",val:"oss-cn-hangzhou.aliyuncs.com"},{name:"华东 2（上海）",val:"oss-cn-shanghai.aliyuncs.com"},{name:"华北 1（青岛）",val:"oss-cn-qingdao.aliyuncs.com"},{name:"华北 2（北京）",val:"oss-cn-beijing.aliyuncs.com"},{name:"华北 3（张家口）",val:"oss-cn-zhangjiakou.aliyuncs.com"},{name:"华北 5（呼和浩特）",val:"oss-cn-huhehaote.aliyuncs.com"},{name:"华南 1（深圳）",val:"oss-cn-shenzhen.aliyuncs.com"},{name:"西南 1（成都）",val:"oss-cn-chengdu.aliyuncs.com"},{name:"中国（香港）",val:"oss-cn-hongkong.aliyuncs.com"},{name:"美国西部 1 （硅谷）",val:"oss-us-west-1.aliyuncs.com"},{name:"美国东部 1 （弗吉尼亚）",val:"oss-us-east-1.aliyuncs.com"},{name:"亚太东南 1 （新加坡）",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"亚太东南 2 （悉尼）",val:"oss-ap-southeast-2.aliyuncs.com"},{name:"亚太东南 3 （吉隆坡）",val:"oss-ap-southeast-3.aliyuncs.com"},{name:"亚太东南 5 （雅加达）",val:"oss-ap-southeast-5.aliyuncs.com"},{name:"亚太东北 1 （日本）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"亚太南部 1 （孟买）",val:"oss-ap-south-1.aliyuncs.com"},{name:"欧洲中部 1 （法兰克福）",val:"oss-eu-central-1.aliyuncs.com"},{name:"英国（伦敦）",val:"oss-eu-west-1.aliyuncs.com"},{name:"中东东部 1 （迪拜）",val:"oss-me-east-1.aliyuncs.com"}],tencent:[{name:"北京",val:"cos.ap-beijing.myqcloud.com"},{name:"上海",val:"cos.ap-shanghai.myqcloud.com"},{name:"广州",val:"cos.ap-guangzhou.myqcloud.com"},{name:"成都",val:"cos.ap-chengdu.myqcloud.com"},{name:"重庆",val:"cos.ap-chongqing.myqcloud.com"},{name:"深圳金融",val:"cos.ap-shenzhen-fsi.myqcloud.com"},{name:"上海金融",val:"cos.ap-shanghai-fsi.myqcloud.com"},{name:"北京金融",val:"cos.ap-beijing-fsi.myqcloud.com"},{name:"中国香港",val:"cos.ap-hongkong.myqcloud.com"},{name:"新加坡",val:"cos.ap-singapore.myqcloud.com"},{name:"孟买",val:"cos.ap-mumbai.myqcloud.com"},{name:"首尔",val:"cos.ap-seoul.myqcloud.com"},{name:"曼谷",val:"cos.ap-bangkok.myqcloud.com"},{name:"东京",val:"cos.ap-tokyo.myqcloud.com"},{name:"硅谷",val:"cos.na-siliconvalley.myqcloud.com"},{name:"弗吉尼亚",val:"cos.na-ashburn.myqcloud.com"},{name:"多伦多",val:"cos.na-toronto.myqcloud.com"},{name:"法兰克福",val:"cos.eu-frankfurt.myqcloud.com"},{name:"莫斯科",val:"cos.eu-moscow"}],huawei:[{name:"非洲-约翰内斯堡",val:"obs.af-south-1.myhuaweicloud.com"},{name:"华北-北京四",val:"obs.cn-north-4.myhuaweicloud.com"},{name:"华北-北京一",val:"obs.cn-north-1.myhuaweicloud.com"},{name:"华东-上海二",val:"obs.cn-east-2.myhuaweicloud.com"},{name:"华东-上海一",val:"obs.cn-east-3.myhuaweicloud.com"},{name:"华南-广州",val:"obs.cn-south-1.myhuaweicloud.com"},{name:"西南-贵阳一",val:"obs.cn-southwest-2.myhuaweicloud.com"},{name:"亚太-曼谷",val:"obs.ap-southeast-2.myhuaweicloud.com"},{name:"亚太-香港",val:"obs.ap-southeast-1.myhuaweicloud.com"},{name:"亚太-新加坡",val:"obs.ap-southeast-3.myhuaweicloud.com"}],qiniu:[{name:"华东",val:"s3-cn-east-1.qiniucs.com"},{name:"华北",val:"s3-cn-north-1.qiniucs.com"},{name:"华南",val:"s3-cn-south-1.qiniucs.com"},{name:"北美",val:"s3-us-north-1.qiniucs.com"},{name:"东南亚",val:"s3-ap-southeast-1.qiniucs.com"}]},kt=Et,xt={name:"DriveEdit",props:{close:{type:Function},driveItem:{orderNum:null,name:"",type:null,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:"",siteType:"/sites/",siteId:""}},supportStrategy:null},watch:{"driveItem.type":function(e){e?this.loadStrategyForm(e):this.storageStrategyForm=null},"driveItem.storageStrategyConfig.siteName":function(){var e=this;if(this.driveItem.storageStrategyConfig.siteName&&this.driveItem.storageStrategyConfig.accessToken){var t={type:"sharepoint"===this.driveItem.type?"Standard":"China",accessToken:this.driveItem.storageStrategyConfig.accessToken,siteName:this.driveItem.storageStrategyConfig.siteType+this.driveItem.storageStrategyConfig.siteName};this.$http.post("/sharepoint/getSiteId",t).then((function(t){0===t.data.code&&(e.driveItem.storageStrategyConfig.siteId=t.data.data,e.$forceUpdate(),e.$message.success("自动获取 SiteId 成功"))}))}}},data:function(){var e=this;return{region:kt,loading:!1,storageStrategyForm:[],rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}],type:[{required:!0,message:"存储策略不能为空",trigger:"change"}],"storageStrategyConfig.domain":[{validator:function(t,n,o){var a=/(http|https):\/\/([\w.]+\/?)\S*/;void 0!==n&&""!==n||"ftp"!==e.driveItem.type?void 0!==n&&""!==n?a.test(n)?o():o(new Error("请输入正确的域名，需以 http:// 或 https:// 开头")):o(new Error("域名不能为空")):o()},type:"url",trigger:"change"}],"storageStrategyConfig.username":[{validator:function(t,n,o){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?o():o(new Error("操作员名称不能为空"))}}],"storageStrategyConfig.password":[{validator:function(t,n,o){"upyun"!==e.driveItem.type&&"ufile"!==e.driveItem.type||void 0!==n&&""!==n?o():o(new Error("操作员密码不能为空"))}}],"storageStrategyConfig.endPoint":[{required:!0,message:"区域不能为空"}],"storageStrategyConfig.accessKey":[{required:!0,message:"AccessKey 不能为空"}],"storageStrategyConfig.filePath":[{required:!0,message:"文件路径不能为空"}],"storageStrategyConfig.secretKey":[{required:!0,message:"SecretKey 不能为空"}],"storageStrategyConfig.bucketName":[{required:!0,message:"此项不能为空"}],"storageStrategyConfig.host":[{required:!0,message:"域名或 IP 不能为空"}],"storageStrategyConfig.port":[{required:!0,message:"端口不能为空"}],"storageStrategyConfig.accessToken":[{required:!0,message:"访问令牌不能为空"}],"storageStrategyConfig.refreshToken":[{required:!0,message:"刷新令牌不能为空"}],"storageStrategyConfig.secretId":[{required:!0,message:"SecretId 不能为空"}],"storageStrategyConfig.siteId":[{required:!0,message:"SiteId 不能为空"}]}}},methods:{cacheChange:function(e){e||(this.driveItem.autoRefreshCache=!1)},loadStrategyForm:function(e){var t=this;this.$http.get("admin/strategy-form",{params:{storageType:e}}).then((function(n){t.storageStrategyForm=n.data.data,"sharepoint"!==e&&"sharepoint-china"!==e||(t.driveItem.storageStrategyConfig.siteType="/sites/")}))},change:function(){this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$http.post("admin/drive",t.driveItem).then((function(e){var n=e.data;t.$message({message:n.msg,type:0===n.code?"success":"error",duration:1500}),t.close(),t.loading=!1})).catch((function(){t.loading=!1}))}))}},mounted:function(){this.driveItem.type&&this.loadStrategyForm(this.driveItem.type)}},Tt=xt,Ot=(n("4598"),n("2877")),Pt=Object(Ot["a"])(Tt,It,Dt,!1,null,"7ee7b560",null),Nt=Pt.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"zfile-cache-statistics",attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("缓存数")]),n("el-button",{staticClass:"zfile-float-right",attrs:{size:"mini",icon:"el-icon-delete",round:"",type:"danger"},on:{click:e.clearCache}},[e._v("清理缓存")])],1),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.cacheCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.hitCount)}})])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v("未命中数")])]),n("div",{staticClass:"card-content",domProps:{textContent:e._s(e.driveCacheInfo.missCount)}})])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"输入关键字搜索"},model:{value:e.cacheSearch,callback:function(t){e.cacheSearch=t},expression:"cacheSearch"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-float-right",attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:e.refreshCacheManageData}},[e._v("刷新统计信息")])],1)],1),n("el-table",{staticClass:"zfile-cache-table",attrs:{height:"50vh",data:e.driveCacheInfo.cacheKeys.filter((function(t){return!e.cacheSearch||t.name.toLowerCase().includes(e.cacheSearch.toLowerCase())}))}},[n("el-table-column",{attrs:{prop:"name",label:"缓存 Key (文件夹名称)","min-width":"75%"}}),n("el-table-column",{attrs:{"min-width":"25%",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(n){return e.refreshCache(t.row)}}},[e._v("刷新缓存")])]}}])})],1)],1)},At=[],Ft=(n("55dd"),n("7f7f"),{name:"CacheManager",props:{currentCacheManageId:null},data:function(){return{cacheSearch:"",driveCacheInfo:{cacheCount:0,hitCount:0,missCount:0,cacheKeys:[]}}},methods:{refreshCache:function(e){var t=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/refresh"),_t.a.stringify({key:e.name})).then((function(){t.$message({message:"刷新成功",type:"success"})}))},refreshCacheManageData:function(){this.loadCacheManageData(),this.$message({message:"刷新成功",type:"success"})},loadCacheManageData:function(){var e=this;this.$http.get("admin/cache/".concat(this.currentCacheManageId,"/info")).then((function(t){var n=t.data.data,o=n.cacheKeys;o.sort((function(e,t){return e.length-t.length}));for(var a=[],i=0;i<o.length;i++)a[i]={name:o[i]};n.cacheKeys=a,e.driveCacheInfo=n}))},clearCache:function(){var e=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))}},beforeMount:function(){this.loadCacheManageData()}}),jt=Ft,$t=(n("1294"),Object(Ot["a"])(jt,Mt,At,!1,null,"352d6332",null)),zt=$t.exports,Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"filterForm",attrs:{id:"filterForm",model:e.filterForm,"label-width":"120px"}},[e._l(e.filterForm.filterList,(function(t,o){return n("div",{key:o},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{prop:"filterList."+o+".expression",rules:{required:!0,message:"此项不能为空",trigger:"blur"},label:"表达式 "+(o+1)}},[n("el-input",{attrs:{size:"small"},model:{value:t.expression,callback:function(n){e.$set(t,"expression",n)},expression:"item.expression"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"zfile-filter-delete-btn",attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFilterItem(o)}}},[e._v("删除\n                    ")])],1)],1)],1)})),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addFilterItem}},[e._v("添加更多")])],1),n("el-form-item",[n("span",{staticClass:"zfile-word-aux zfile-margin-left-unset"},[e._v("\n                    表达式规则:\n                    "),n("br"),e._v("\n                    *: 单级路径通配符，如表达式 /*.jpg，可以匹配根路径下所有的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    **: 多级路径通配符，如表达式 **.jpg，可以匹配所有路径下的 jpg 后缀的文件\n                    "),n("br"),e._v("\n                    注意："),n("b",[e._v("/a.png")]),e._v(" 表示根路径下的 a.png。 "),n("b",[e._v("/a/b/c.png")]),e._v("，表示 /a/b/ 路径下的 c.png。 "),n("b",[e._v("a.png")]),e._v("，什么都不表示，因为未标注路径。\n                ")])])],2),n("div",{staticClass:"zfile-filter-save-btn",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:e.saveFilterForm}},[e._v("保存")])],1)],1)},qt=[],Lt={name:"FilterPattern",props:{close:{type:Function},driveId:null},data:function(){return{filterForm:{filterList:[]}}},methods:{loadFilterData:function(){var e=this;this.$http.get("admin/drive/".concat(this.driveId,"/filters")).then((function(t){e.filterForm.filterList=t.data.data}))},addFilterItem:function(){this.filterForm.filterList.push({expression:"",driveId:this.driveId})},deleteFilterItem:function(e){this.filterForm.filterList.splice(e,1)},saveFilterForm:function(){var e=this;this.$http.post("admin/drive/".concat(this.driveId,"/filters"),this.filterForm.filterList).then((function(){e.$message({message:"保存成功",type:"success"}),e.close()}))}},mounted:function(){this.loadFilterData()}},Xt=Lt,Yt=(n("a9d6"),Object(Ot["a"])(Xt,Rt,qt,!1,null,"13eb34d1",null)),Bt=Yt.exports,Ht={name:"DriveList",components:{FilterPattern:Bt,CacheManager:zt,DriveEdit:Nt},data:function(){return{loading:!1,driveList:[],supportStrategy:[],driveItem:{orderNum:null,name:"",type:null,enable:!0,searchEnable:!1,searchIgnoreCase:!1,searchContainEncryptedFile:!1,enableCache:!1,autoRefreshCache:!1,storageStrategyConfig:{endPoint:"",pathStyle:"",isPrivate:!1,accessKey:null,secretKey:null,bucketName:null,host:null,port:null,filePath:null,accessToken:null,refreshToken:null,secretId:null,username:null,password:null,basePath:"",domain:""}},sortable:null,driveEditDialogVisible:!1,filterDialogVisible:!1,cacheManageVisible:!1,currentCacheManageId:null}},methods:{editDriveId:function(e){var t=this;this.$prompt("请输入要修改为的 ID，需为大于零的整数。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d{0,9}$/,inputErrorMessage:"ID 只能为大于零的整数，最大支持 9 位数字。"}).then((function(n){var o=n.value;t.$http.post("admin/drive/updateId",_t.a.stringify({updateId:e,newId:o})).then((function(){t.$message({message:"修改成功",type:"success"}),t.init()}))}))},setSort:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");Ct.create(t,{onEnd:function(t){if(t.oldIndex!==t.newIndex){var n=e.driveList.splice(t.oldIndex,1)[0];e.driveList.splice(t.newIndex,0,n),e.$http.post("admin/drive/drag",e.driveList).then((function(){e.$message({message:"调整排序成功",type:"success"})}))}}})},clearCache:function(){var e=this;this.$http.post("admin/cache/".concat(this.currentCacheManageId,"/clear")).then((function(){e.loadCacheManageData(),e.$message({message:"清理成功",type:"success"})}))},closeCacheManage:function(){this.cacheSearch=""},cacheManage:function(e){this.currentCacheManageId=e.id,this.cacheManageVisible=!0},showFilterDialog:function(e){this.currentCacheManageId=e.id,this.filterDialogVisible=!0},switchEnableStatus:function(e){var t=this,n=e.enable?"enable":"disable";this.$http.post("admin/drive/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchCacheEnableStatus:function(e){var t=this,n=e.enableCache?"enable":"disable";this.$http.post("admin/cache/"+e.id+"/"+n).then((function(){t.$message.success("修改成功")}))},switchAutoRefreshStatus:function(e){var t=this,n=e.autoRefreshCache?"start":"stop";this.$http.post("admin/cache/"+e.id+"/auto-refresh/"+n).then((function(){t.$message.success("修改成功")}))},typeFormatter:function(e,t,n){for(var o in this.supportStrategy)if(this.supportStrategy[o].key===n)return this.supportStrategy[o].description},editDrive:function(e){var t=this;this.$http.get("admin/drive/"+e.id).then((function(e){var n=e.data.data;n.type=n.type.key,t.driveItem=n,t.driveEditDialogVisible=!0}))},deleteDrive:function(e){var t=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&t.$http.delete("admin/drive/"+e.id).then((function(e){0===e.data.code?(t.$message.success("删除成功"),t.init()):t.$message.success("删除失败")}))}})},closeDriveEdit:function(){this.driveEditDialogVisible=!1,this.init()},closeFilterDialog:function(){this.filterDialogVisible=!1},addDrive:function(){Object.assign(this.driveItem,this.$options.data().driveItem),this.driveItem.id=null,this.driveEditDialogVisible=!0,console.log(this.supportStrategy)},init:function(){var e=this;this.$http.get("admin/support-strategy").then((function(t){e.supportStrategy=t.data.data})),this.$http.get("admin/drives").then((function(t){var n=t.data.data;for(var o in n)n[o].type=n[o].type.key;e.driveList=t.data.data}))}},mounted:function(){this.init(),this.setSort()}},Vt=Ht,Wt=(n("34b5"),Object(Ot["a"])(Vt,o,a,!1,null,"5d92afde",null));t["default"]=Wt.exports},"9e6a":function(e,t,n){"use strict";var o=n("d233"),a=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:o.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(e,t){for(var n={},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,l=o.split(t.delimiter,r),s=0;s<l.length;++s){var c,u,d=l[s],h=d.indexOf("]="),p=-1===h?d.indexOf("="):h+1;-1===p?(c=t.decoder(d,i.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,p),i.decoder),u=t.decoder(d.slice(p+1),i.decoder)),a.call(n,c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}return n},l=function(e,t,n){for(var o=t,a=e.length-1;a>=0;--a){var i,r=e[a];if("[]"===r)i=[],i=i.concat(o);else{i=n.plainObjects?Object.create(null):{};var l="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,s=parseInt(l,10);!isNaN(s)&&r!==l&&String(s)===l&&s>=0&&n.parseArrays&&s<=n.arrayLimit?(i=[],i[s]=o):i[l]=o}o=i}return o},s=function(e,t,n){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,s=i.exec(o),c=s?o.slice(0,s.index):o,u=[];if(c){if(!n.plainObjects&&a.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}var d=0;while(null!==(s=r.exec(o))&&d<n.depth){if(d+=1,!n.plainObjects&&a.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+o.slice(s.index)+"]"),l(u,t,n)}};e.exports=function(e,t){var n=t?o.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!==typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"===typeof n.delimiter||o.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"===typeof n.depth?n.depth:i.depth,n.arrayLimit="number"===typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"===typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"===typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"===typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"===typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"===typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"===typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var a="string"===typeof e?r(e,n):e,l=n.plainObjects?Object.create(null):{},c=Object.keys(a),u=0;u<c.length;++u){var d=c[u],h=s(d,a[d],n);l=o.merge(l,h,n)}return o.compact(l)}},a9d6:function(e,t,n){"use strict";var o=n("e9aa"),a=n.n(o);a.a},b313:function(e,t,n){"use strict";var o=String.prototype.replace,a=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return o.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){var t;while(e.length){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var o=[],a=0;a<t.length;++a)"undefined"!==typeof t[a]&&o.push(t[a]);n.obj[n.prop]=o}}return t},r=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)"undefined"!==typeof e[o]&&(n[o]=e[o]);return n},l=function e(t,n,a){if(!n)return t;if("object"!==typeof n){if(Array.isArray(t))t.push(n);else{if("object"!==typeof t)return[t,n];(a.plainObjects||a.allowPrototypes||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=r(t,a)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,i){o.call(t,i)?t[i]&&"object"===typeof t[i]?t[i]=e(t[i],n,a):t.push(n):t[i]=n})),t):Object.keys(n).reduce((function(t,i){var r=n[i];return o.call(t,i)?t[i]=e(t[i],r,a):t[i]=r,t}),i)},s=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),n="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(o):i<128?n+=a[i]:i<2048?n+=a[192|i>>6]+a[128|63&i]:i<55296||i>=57344?n+=a[224|i>>12]+a[128|i>>6&63]+a[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=a[240|i>>18]+a[128|i>>12&63]+a[128|i>>6&63]+a[128|63&i])}return n},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var a=t[o],r=a.obj[a.prop],l=Object.keys(r),s=0;s<l.length;++s){var c=l[s],u=r[c];"object"===typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:r,prop:c}),n.push(u))}return i(t)},h=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:r,assign:s,compact:d,decode:c,encode:u,isBuffer:p,isRegExp:h,merge:l}},de88:function(e,t,n){},e9aa:function(e,t,n){}}]);